---
import Header from "../components/Header.astro";

import { getCollection } from "astro:content";

const pages = await getCollection("pages");

const sortedPages = pages.sort(
  (a, b) => (a.data.sort || 0) - (b.data.sort || 0),
);
---

<html lang="fi">
  <head>
    <title>KS Airsoft</title>
  </head>

  <body>
    <Header />

    <div style="display: flex; min-height: 100vh; gap: 12px; margin-top: 12px;">
      <div style="max-width: 1200px; margin: 0 auto; flex: 1;">
        <div
          style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 12px;"
        >
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <nav style="background-color: #eae7e4; border-radius: 8px;">
              <div
                style="background-color: #726250; color: white; padding: 8px 16px; border-radius: 8px 8px 0 0;"
              >
                Päävalikko
              </div>

              <div style="padding: 16px;">
                <ul
                  style="display: flex; flex-direction: column; gap: 8px; list-style: none; margin: 0; padding: 0;"
                >
                  {
                    sortedPages.map((page) => (
                      <li>
                        <a
                          href={page.data.slug ? `/${page.data.slug}` : "/"}
                          style="text-decoration: none; color: inherit;"
                        >
                          {page.data.title}
                        </a>
                      </li>
                    ))
                  }
                </ul>
              </div>
            </nav>

            <div
              style="background-color: #eae7e4; border-radius: 8px; padding: 16px;"
            >
              <h3>Yhteystiedot</h3>

              <p>Discord, Facebook, etc.</p>
            </div>
          </div>

          <div style="flex: 2;">
            <slot />
          </div>

          <div style="flex: 1;">
            <div
              style="background-color: #eae7e4; border-radius: 8px; padding: 16px;"
            >
              <h3>Sponsorit</h3>

              <p>Sponsor logos here</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      style="background-color: #726250; color: white; padding: 16px; text-align: center; margin-top: 12px;"
    >
      <p>&copy; 2023 KS Airsoft ry</p>
    </div>
  </body>
</html>
