---
import Header from "../components/Header.astro";
import Facebook from "../components/Facebook.astro";
import Discord from "../components/Discord.astro";
import Github from "../components/Github.astro";
import Kuulaportti from "../components/Kuulaportti.astro";

const pages = Object.values(
  import.meta.glob("../pages/*.md", { eager: true }),
) as Array<{
  frontmatter: { title: string; sort?: number; slug?: string };
  url: string;
}>;

const sortedPages = pages.sort(
  (a, b) => (a.frontmatter.sort || 0) - (b.frontmatter.sort || 0),
);

const { frontmatter } = Astro.props;
---

<html lang="fi">
  <head>
    <title>KS Airsoft</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
        background-color: #f5f3f1;
        margin: 0;
      }
      h1, h2, h3, h4, h5, h6 {
        font-family: "Avenir Next", sans-serif;
        color: #726250;
      }
      .main-content {
        background-color: #eae7e4;
        border-radius: 8px;
      }
      .content-header {
        background-color: #ccc6be;
        color: white;
        padding: 8px 16px;
        border-radius: 8px 8px 0 0;
      }
      .content-body {
        padding: 16px;
      }
    </style>
  </head>

  <body>
    <Header />

    <div style="display: flex; min-height: 100vh; gap: 16px; margin-top: 16px;">
      <div style="max-width: 1200px; margin: 0 auto; flex: 1;">
        <div
          style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 16px;"
        >
          <div style="display: flex; flex-direction: column; gap: 16px;">
            <nav style="background-color: #eae7e4; border-radius: 8px;">
              <div
                style="background-color: #726250; color: white; padding: 8px 16px; border-radius: 8px 8px 0 0;"
              >
                Päävalikko
              </div>

              <div style="padding: 8px;">
                <ul
                  style="display: flex; flex-direction: column; gap: 4px; list-style: none; margin: 0; padding: 0;"
                >
                  {
                    sortedPages.map((page) => (
                      <li>
                        <a
                          href={page.url || "/"}
                          style="text-decoration: none; color: inherit;"
                        >
                          {page.frontmatter.title}
                        </a>
                      </li>
                    ))
                  }
                </ul>
              </div>
            </nav>

            <div
              style="background-color: #eae7e4; border-radius: 8px; padding: 16px;"
            >
              <h3>Yhteystiedot</h3>
              <div style="display: flex; gap: 8px;">
                <a
                  href="https://www.facebook.com/ksairsoft"
                  target="_blank"
                  style="height: 48px;"><Facebook /></a
                >
                <a
                  href="https://discordapp.com/invite/RDCAeB8"
                  target="_blank"
                  style="height: 48px;"><Discord /></a
                >
                <a
                  href="https://github.com/Keski-SuomenAirsoft/ksairsoft.info"
                  target="_blank"
                  style="height: 48px;"><Github /></a
                >
                <a
                  href="https://kuulaportti.fi/?page=team_profile&id=179#description"
                  target="_blank"
                  style="height: 48px;"><Kuulaportti /></a
                >
              </div>
            </div>
          </div>

          <div style="flex: 2;">
            <div class="main-content">
              <div class="content-header">{frontmatter?.title || 'Page'}</div>
              <div class="content-body">
                <slot />
              </div>
            </div>
          </div>

          <div style="flex: 1;">
            <div
              style="background-color: #eae7e4; border-radius: 8px; padding: 16px;"
            >
              <h3>Sponsorit</h3>

              <p>Sponsor logos here</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      style="background-color: #726250; color: white; padding: 16px; text-align: center; margin-top: 12px;"
    >
      <p>&copy; 2023 KS Airsoft ry</p>
    </div>
  </body>
</html>
